# Phase5 UI: カンバン + 読む順計画 (引き継ぎ)

## 目的 / Goals

- 未読消化を促し、読む順番を計画・管理できるUIを作る。
- 一覧の単位は3種類で切り替える:
  - ProduceCard一覧
  - SupportCard一覧
  - Idol別Story一覧
- PC/スマホでレイアウトを分けて最適化する。

## 決定事項 (確定)

1. **メイン画面はカンバン方式** (Today / Next / Later)。

1. **読む順一覧は別画面**。

1. **読む順一覧はPCでは「閲覧/編集 切替」**、
   **スマホでは「編集専用画面を分離」**で運用する。

1. **読む順の決め方は2種類**:
   - 手動 (ドラッグで並び替え)
   - 自動 (規則に基づき生成)

1. **期間プランは4種類**:
   - 1日 / 3日 / 7日 / 今月

## 画面A: カンバン (メイン)

### 役割

- 「今日読むもの」に集中させ、未読消化の実行性を高める。

### PCレイアウト (例)

- 上部: 検索 / 一覧切替(Produce・Support・Idol) / 未読のみ
- PlanBar: 期間 / 進捗 / 今日の目標 / 残り日数
- 本文: **Today / Next / Later** の3列

### スマホレイアウト (例)

- 上部: 一覧切替タブ
- PlanBarは小さく表示
- 本文: **Today / Next / Later** をタブ切替で表示

### 動作の要点

- 読む順一覧で決めた順序/プランを Today/Next/Later に反映。
- 既読化はカンバン側で実行する。

## 画面B: 読む順一覧

### 役割 (画面B)

- 読む順と期間プランの設計/編集を行う画面。

### PC運用

- 同一画面で **閲覧 ↔ 編集** を切り替え。
- **編集モードのみ**:
  - ドラッグで順番変更
  - 自動ルール設定パネルを表示
  - 保存 / 破棄ボタンを表示

### スマホ運用

- **閲覧画面**はシンプルなリスト。
- **編集は別画面 (またはモーダル)** で実施。
- 編集画面でのみドラッグ/自動設定を提供。

## 自動順序生成 (Auto Rules)

### 基本ルール

- 優先ルールはユーザーが並び替え可能:
  1. アイドル攻略順
  2. アイドル内のストーリー順
  3. レア順 (SSR → SR → R)

### UI案

- 「優先ルールの並び替え」(ドラッグ)
- 「アイドル順」専用リスト
- 「適用」ボタンで結果を反映

## 期間プランの扱い (PlanBar)

- **1日**: Todayが全体。
- **3日 / 7日**: Todayが「当日分」。
- **今月**: Week1-4など週単位配分を推奨。
- PlanBarで表示する項目:
  - 期間
  - 進捗 (既読/合計)
  - 今日の目標
  - 残り日数

## 追加設計ポイント

- カンバンは「実行」、読む順一覧は「計画」の役割で分離。
- 読む順一覧は閲覧/編集の両方が可能であること。
- 未読のみ / レアリティ / アイドル等のフィルタは FilterPanel で扱う。

## 未決事項 / 要確認 (次Agent向け)

1. カンバン列名: Today/Next/Laterのままか、日本語化するか。
2. 今月プランの配分方式:
   - 週単位配分 vs 日単位配分
3. 自動生成後の手動修正と再生成の扱い:
   - 「再生成」で手動編集を上書きするか
4. データモデル案:
   - ReadingPlan: { period, mode, items[], rules }
   - item: { storyId, bucket(Today/Next/Later), order }

## 次のステップ案

1. 画面A/Bのワイヤーフレーム詳細化 (PC/スマホ別)。
2. UIコンポーネント分解:
   - PlanBar, KanbanColumn, StoryItem, OrderList, RulePanel など。
3. 状態/データモデルを composable として設計:
   - useReadingPlan, useKanbanBoard など。
4. Phase5のテスト計画を整理 (TDD)。
